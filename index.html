<!doctype html>
<html lang="en" ng-app>

<head>
  <title>aio-ui</title>
  <link rel="stylesheet" href="css/aio-ui.css" type="text/css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">




  <!-- Clases
  <script src="./js/Module.js"></script>
  <script src="./js/Canvas.js"></script>
  <script src="./js/Character.js"></script>
  <script src="./js/BodyPart.js"></script>
  <script src="./js/Eyes.js"></script>
  <script src="./js/VisualModule.js"></script>
  <script src="./js/Profile.js"></script>
  <script src="./js/AudioVisualModule.js"></script>
  <script src="./js/Main.js"></script>
  -->

  <!-- Two js
  <script src="https://cdnjs.cloudflare.com/ajax/libs/two.js/0.6.0/two.min.js"></script>
  
  -->

  <!--
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="./js/paperjs/dist/paper-full.min.js"></script>
  -->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/two.js/0.6.0/two.min.js"></script>

</head>

<body>
  <div id="assets">
    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
      width="800px" height="400px" viewBox="0 0 800 400" enable-background="new 0 0 800 400" xml:space="preserve">
      <path stroke="#000000" stroke-miterlimit="10" d="M471.442,200.656c0,103.342,0,103.342-71.472,103.342l0,0
	c-71.471,0-71.471,0-71.471-103.91l0,0c0-103.91,0-103.91,71.471-103.91l0,0C471.442,96.178,471.442,96.178,471.442,200.656
	L471.442,200.656z" />
    </svg>
    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
      width="800px" height="400px" viewBox="0 0 800 400" enable-background="new 0 0 800 400" xml:space="preserve">
    <path stroke="#000000" stroke-miterlimit="10" d="M471.442,186.96c0-12.979-31.47,6.5-70.942,6.5c-39.472,0-72-19.479-72-6.5
      s31.999,23.5,71.471,23.5C439.443,210.46,471.442,199.938,471.442,186.96z"/>
    </svg>
  </div>

  <div class="scripts">
    <script>

        $(function() {

          var type = 'svg';
          var two = new Two({
            type: Two.Types[type],
            fullscreen: true,
            autostart: true
          }).appendTo(document.body);

          var dimensions = 500;
          var shapes = [];
          var index = 0;
          var length = 0;
          var scale = two.width > two.height ? two.height / dimensions : two.width / dimensions;
          var easing = 0.125;

          $('#assets svg').each(function(i, el) {

            var shape = two.interpret(el).center();
            shape.fill = 'black';
            shape.visible = false;
            shape.noStroke();
            shape.translation.set(two.width / 2, two.height / 2);
            shapes.push(shape);

            _.each(shape.children, function(child) {
              _.each(child.vertices, function(v) {
                v.ox = v.x;
                v.oy = v.y;
              });
            });

            /*_.each(shape.children, function(child) {
              console.log( '-------------------------------');
              _.each(child.vertices, function(v) {
                console.log( 'x:' + v.ox + ' y:' + v.oy);
              });
            });*/

            /*_.each(shape.children, function(child) {
              console.log( '-------------------------------');
              _.each(child.vertices, function(v) {
                console.log( 'x:' + v.ox + ' y:' + v.oy);
              });
            });*/

            /*var shape0 = shapes[0].children;
            var shape1 = shapes[1].children;
            var shape0_vertices_length = shape0.vertices.length;
            var shape1_vertices_length = shape1.vertices.length;

            _.each(shape0.vertices, function(v) {
              console.log( 'x:' + v.ox + ' y:' + v.oy);
            });*/

            

          });

          /*console.log("vertices_length: "+shapes.length);
          for(var i=0; i<shapes.length; i++){
            var child = shapes[i].children
            var children_length = child.length;
            console.log("children_length: "+children_length);
            for( var j = 0; j<children_length; j++ ){
              var vertices = child[j].vertices;
              var vertices_length = vertices.length;
              console.log("vertices_length: "+vertices_length);
              for( var k = 0; k<vertices_length; k++ ){
                vertice = vertices[k];
                console.log( 'x:' + vertice.ox + ' y:' + vertice.oy);
              }
            }
          }*/

          length = shapes.length;

          function getVertices(shape, child){
            return shapes[shape].children[child].vertices
          }

          function getShape(shape){
            return shapes[shape];
          }

          function shiftArrayPositions(number, array){
            var array = [];
            for(var i=number; i<0; i= i%array.length + 1){
              array.push(array[i]);
            }
            return array;
          }
          
          var vertices_0 = getVertices(0, 0);
          var vertices_1 = getVertices(1, 0);
          var shape_0 = getShape(0);

          var limite_izquierdo = 3;
          var limite_derecho = 8; 

          console.log(vertices_1[2]);

          var counter = 0.01;
          
          //morphShape();
          function morphShape(shape1, shape2, two){
            two.bind('update', function() {
              
            }).play();
          }
          
          goToTest();
          function goToTest(){

            var a = [3,8,4];
            var b = [7,5,2];
            //var a = [3];
            //var b = [7];
            var error = 0;
            var inc = 1;
            var todosEnCero = false;
            while( !todosEnCero ){
              todosEnCero = true;
              for(var i=0; i<a.length; i++){
                b[i] = goTo(a[i], b[i], inc, error);
                if( b[i] != a[i] )
                  todosEnCero = false;
              }
            }

            for(var i=0; i<a.length; i++){
              console.log(b[i]);
            }
          }

          function goTo(a, b, inc, error){
            var value;
            if( b==a )
              value = 0;
            if( b-error <= a && a <= b+error )
              value = 0;
            if( a > b )
              value = b + inc;
            else
              value = b - inc;
            return value;
          }

          /*function closeEyes(){
            
            var ease_speed = 0.1;

            shape_0.visible=true;

            for( var i=0; i<vertices_0.length; i++){
              if( i >= limite_izquierdo && i <= limite_derecho ){
                if( vertices_1[i].oy < 200){  
                  var oy = vertices_1[i].oy += Math.log(counter);
                  vertices_1[i].y += Math.log(counter);
                  vertices_1[i].controls.left.y = 0;
                  vertices_1[i].controls.right.y = 0;
                }
              }else if ( i<limite_izquierdo || i>limite_derecho ){
                if( vertices_1[i].oy > 200){
                  var oy = vertices_1[i].oy -= Math.log(counter, 7);
                  vertices_1[i].y -= Math.log(counter);
                  vertices_1[i].controls.left.y = 0;
                  vertices_1[i].controls.right.y = 0;
                }
              }
            }
            counter +=0.03;
          }*/


        });

      </script>
  </div>
</body>

</html>